{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\nconst API_KEY = '50832143-3e18ca1c7d3ff8d3379931b93'\nconst BASE_URL = 'https://pixabay.com/api/'\n\nexport async function getImagesByQuery(query, page = 1) {\n    const params = {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: 15,\n        page\n    }\n    const { data } = await axios(BASE_URL, { params })\n    // console.log(data);\n    return data\n}\n","\nconst loader = document.querySelector('.loader')\nexport const loadBtn = document.querySelector('.load-more-btn')\n\nexport function createGallery(images) {\n    return images.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n<li class=\"gallery-item\"><a href=\"${largeImageURL}\"><img src=\"${webformatURL}\" alt=\"${tags}\">\n<div class=\"info\">\n<p><b>Likes</b>${likes}</p>\n<p><b>Views</b>${views}</p>\n<p><b>Comments</b>${comments}</p>\n<p><b>Downloads</b>${downloads}</p>\n</div>\n</a></li>\n    `).join('')\n}\n\nexport function showLoader() {\n    loader.classList.remove('hidden');\n}\nexport function hideLoader() {\n    loader.classList.add('hidden');\n}\nexport function showLoadMoreButton() {\n    loadBtn.classList.remove('load-more-btn-hidden');\n}\nexport function hideLoadMoreButton() {\n    loadBtn.classList.add('load-more-btn-hidden');\n}","import Simplelightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { getImagesByQuery } from './js/pixabay-api'\nimport { createGallery, showLoader, hideLoader, showLoadMoreButton, hideLoadMoreButton, loadBtn } from './js/render-functions'\n\nlet lightbox = new Simplelightbox('.gallery a')\nconst list = document.querySelector('.gallery')\nconst form = document.querySelector('.form')\n\nlet page = 1; \nlet currentQuery = ''; \nlet totalHits = 0; \n\n\nfunction clearGallery() {\n    list.innerHTML = ''\n}\n\n\nform.addEventListener('submit', async (event) => {\n    event.preventDefault()\n\n    const query = event.currentTarget.elements[\"search-text\"].value.trim()\n    // console.log(query);\n    \n    if (!query) {\n        iziToast.warning({\n            message: 'Please enter a search term!'\n        })\n        return\n    }\n    currentQuery = query; \n\n    clearGallery();\n    showLoader();\n    hideLoadMoreButton()\n\n    try {\n        const res = await getImagesByQuery(currentQuery, page);\n        totalHits = res.totalHits; \n        // console.log(totalHits);\n\n\n        if (res.hits.length === 0) {\n            iziToast.error({\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                position: 'topRight'\n            })\n        } else {\n            list.insertAdjacentHTML('beforeend', createGallery(res.hits))\n            lightbox.refresh(); \n\n            if (res.hits.length < totalHits) {\n                showLoadMoreButton()\n            } else {\n                hideLoadMoreButton();\n                iziToast.info({\n                    message: \"We're sorry, but you've reached the end of search results.\",\n                    position: 'topRight'\n                });\n            }\n        }\n    } catch (error) {\n        console.log(error.message);\n        iziToast.error({\n            message: 'Something went wrong. Please try again!',\n            position: 'topRight'\n        });\n    } finally {\n        hideLoader();\n    }\n})\n\nloadBtn.addEventListener('click', handleLoadMore);\n\nasync function handleLoadMore() {\n    page++; \n\n    showLoader(); \n\n    try {\n        const data = await getImagesByQuery(currentQuery, page); \n\n        list.insertAdjacentHTML('beforeend', createGallery(data.hits));\n        lightbox.refresh(); \n\n        const { height: cardHeight } = list.firstElementChild.getBoundingClientRect();\n        window.scrollBy({\n            top: cardHeight * 2,\n            behavior: 'smooth',\n        });\n\n    } catch (error) {\n        console.log(error.message);\n        iziToast.error({\n            message: 'Failed to load more images. Please try again!',\n            position: 'topRight'\n        });\n    } finally {\n        hideLoader(); \n    }\n}"],"names":["API_KEY","BASE_URL","getImagesByQuery","query","page","params","data","axios","loader","loadBtn","createGallery","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","lightbox","Simplelightbox","list","form","currentQuery","totalHits","clearGallery","event","iziToast","res","error","handleLoadMore","cardHeight"],"mappings":"+vBACA,MAAMA,EAAU,qCACVC,EAAW,2BAEV,eAAeC,EAAiBC,EAAOC,EAAO,EAAG,CACpD,MAAMC,EAAS,CACX,IAAKL,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAAC,CACH,EACK,CAAE,KAAAE,CAAI,EAAK,MAAMC,EAAMN,EAAU,CAAE,OAAAI,EAAQ,EAEjD,OAAOC,CACX,CChBA,MAAME,EAAS,SAAS,cAAc,SAAS,EAClCC,EAAU,SAAS,cAAc,gBAAgB,EAEvD,SAASC,EAAcC,EAAQ,CAClC,OAAOA,EAAO,IAAI,CAAC,CAAE,aAAAC,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,IAAK;AAAA,oCAChEL,CAAa,eAAeD,CAAY,UAAUE,CAAI;AAAA;AAAA,iBAEzEC,CAAK;AAAA,iBACLC,CAAK;AAAA,oBACFC,CAAQ;AAAA,qBACPC,CAAS;AAAA;AAAA;AAAA,KAGzB,EAAE,KAAK,EAAE,CACd,CAEO,SAASC,GAAa,CACzBX,EAAO,UAAU,OAAO,QAAQ,CACpC,CACO,SAASY,GAAa,CACzBZ,EAAO,UAAU,IAAI,QAAQ,CACjC,CACO,SAASa,GAAqB,CACjCZ,EAAQ,UAAU,OAAO,sBAAsB,CACnD,CACO,SAASa,GAAqB,CACjCb,EAAQ,UAAU,IAAI,sBAAsB,CAChD,CCrBA,IAAIc,EAAW,IAAIC,EAAe,YAAY,EAC9C,MAAMC,EAAO,SAAS,cAAc,UAAU,EACxCC,EAAO,SAAS,cAAc,OAAO,EAE3C,IAAItB,EAAO,EACPuB,EAAe,GACfC,EAAY,EAGhB,SAASC,GAAe,CACpBJ,EAAK,UAAY,EACrB,CAGAC,EAAK,iBAAiB,SAAU,MAAOI,GAAU,CAC7CA,EAAM,eAAgB,EAEtB,MAAM3B,EAAQ2B,EAAM,cAAc,SAAS,aAAa,EAAE,MAAM,KAAM,EAGtE,GAAI,CAAC3B,EAAO,CACR4B,EAAS,QAAQ,CACb,QAAS,6BACrB,CAAS,EACD,MACH,CACDJ,EAAexB,EAEf0B,IACAV,IACAG,EAAoB,EAEpB,GAAI,CACA,MAAMU,EAAM,MAAM9B,EAAiByB,EAAcvB,CAAI,EACrDwB,EAAYI,EAAI,UAIZA,EAAI,KAAK,SAAW,EACpBD,EAAS,MAAM,CACX,QAAS,2EACT,SAAU,UAC1B,CAAa,GAEDN,EAAK,mBAAmB,YAAaf,EAAcsB,EAAI,IAAI,CAAC,EAC5DT,EAAS,QAAO,EAEZS,EAAI,KAAK,OAASJ,EAClBP,EAAoB,GAEpBC,IACAS,EAAS,KAAK,CACV,QAAS,6DACT,SAAU,UAC9B,CAAiB,GAGZ,OAAQE,EAAO,CACZ,QAAQ,IAAIA,EAAM,OAAO,EACzBF,EAAS,MAAM,CACX,QAAS,0CACT,SAAU,UACtB,CAAS,CACT,QAAc,CACNX,GACH,CACL,CAAC,EAEDX,EAAQ,iBAAiB,QAASyB,CAAc,EAEhD,eAAeA,GAAiB,CAC5B9B,IAEAe,IAEA,GAAI,CACA,MAAMb,EAAO,MAAMJ,EAAiByB,EAAcvB,CAAI,EAEtDqB,EAAK,mBAAmB,YAAaf,EAAcJ,EAAK,IAAI,CAAC,EAC7DiB,EAAS,QAAO,EAEhB,KAAM,CAAE,OAAQY,CAAU,EAAKV,EAAK,kBAAkB,wBACtD,OAAO,SAAS,CACZ,IAAKU,EAAa,EAClB,SAAU,QACtB,CAAS,CAEJ,OAAQF,EAAO,CACZ,QAAQ,IAAIA,EAAM,OAAO,EACzBF,EAAS,MAAM,CACX,QAAS,gDACT,SAAU,UACtB,CAAS,CACT,QAAc,CACNX,GACH,CACL"}